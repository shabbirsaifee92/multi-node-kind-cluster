#!/bin/bash

echo "\n*******************************************************************************************************************"
echo "Installing Kind"
echo "*******************************************************************************************************************"
brew update && brew install kind

echo "\n*******************************************************************************************************************"
echo "Creating new kind cluster"
echo "*******************************************************************************************************************"
kind create cluster --config config.yaml --name dev

echo "\n*******************************************************************************************************************"
echo "Installing Nginx Ingress Controller"
echo "*******************************************************************************************************************"
kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml

echo "\n*******************************************************************************************************************"
echo "Labeling work node"
echo "*******************************************************************************************************************"
kubectl label node dev-worker ingress-ready=true
